<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misión a Marte - Explorador Interactivo</title>
    <link rel="stylesheet" href="style.css">
    <!-- Favicon para una mejor identidad visual -->
    <link rel="icon" href="images/favicon.ico" type="image/x-icon"> 
</head>
<body>


    <canvas id="starfield" aria-hidden="true" title="Fondo animado de estrellas"></canvas>
    <header class="hero-section">
        <div class="hero-content">
            <h1>Explorando Marte</h1>
            <p class="subtitle">Un viaje interactivo a través de los datos de la NASA</p>
        </div>
        <nav class="main-nav">
            <button id="nav-dashboard" class="nav-btn active" aria-label="Dashboard">Dashboard</button>
            <button id="nav-missions" class="nav-btn" aria-label="Misiones">Misiones</button>
            <button id="nav-planet" class="nav-btn" aria-label="Planeta Rojo">Planeta Rojo</button>
        </nav>
    </header>

    <main id="spa-content">
        <!-- Aquí se cargará dinámicamente el contenido de cada vista -->
    </main>

    <footer class="footer">
        <p>&copy; 2023 Misión a Marte. Todos los derechos reservados. Datos proporcionados por la NASA.</p>
    </footer>

    <script type="module" src="scripts/main.js"></script>
    <script>
    // SPA simple: carga vistas HTML en el contenedor #spa-content
    const views = {
        dashboard: 'dashboard.html',
        missions: 'missions.html',
        planet: 'planet.html'
    };
    const spaContent = document.getElementById('spa-content');
    const navBtns = {
        dashboard: document.getElementById('nav-dashboard'),
        missions: document.getElementById('nav-missions'),
        planet: document.getElementById('nav-planet')
    };

    function setActiveNav(view) {
        Object.keys(navBtns).forEach(key => {
            navBtns[key].classList.toggle('active', key === view);
        });
    }

    async function loadView(view) {
        setActiveNav(view);
        try {
            const res = await fetch(views[view]);
            if (!res.ok) throw new Error('No se pudo cargar la vista');
            const html = await res.text();
            // Extraer solo el contenido de <main> de la vista si existe
            const temp = document.createElement('div');
            temp.innerHTML = html;
            const main = temp.querySelector('main');
            spaContent.innerHTML = main ? main.innerHTML : html;

            // Inicializar la vista correspondiente después de inyectarla
            if (view === 'dashboard' && window.app && typeof window.app.initDashboardView === 'function') {
                window.app.initDashboardView();
            } else if (view === 'missions' && window.app && typeof window.app.initMissionsView === 'function') {
                window.app.initMissionsView();
            } else if (view === 'planet' && window.app && typeof window.app.initPlanetView === 'function') {
                window.app.initPlanetView();
            }
        } catch (e) {
            console.error(e);
            spaContent.innerHTML = '<p class="error-message">No se pudo cargar la vista.</p>';
        }
    }

    // Navegación
    navBtns.dashboard.addEventListener('click', () => loadView('dashboard'));
    navBtns.missions.addEventListener('click', () => loadView('missions'));
    navBtns.planet.addEventListener('click', () => loadView('planet'));

    // Cargar vista inicial
    loadView('dashboard');
    </script>

</body>
</html>